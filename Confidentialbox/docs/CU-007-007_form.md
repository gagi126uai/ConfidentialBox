# Especificación de Caso de Uso — CU-007-007

## Encabezado del formulario
- **Código:** CU-007-007
- **Nombre:** Proyección en AI Security Dashboard
- **Referencias:** Métricas y paneles descritos en CORE 2 de `docs/AI_scoring.md` y datos provenientes de `ThreatScore`, `RiskScore` y alertas de revisión/bloqueo
- **Autor:** (completar)
- **Revisor:** (completar)
- **Fecha:** (completar)
- **Estado:** Borrador

## Detalle del caso de uso
- **Descripción:** El sistema consume los `ThreatScore` de archivos, el `RiskScore` de comportamiento de usuario y las alertas generadas para proyectarlos en el AI Security Dashboard, mostrando tendencias, severidades y recomendaciones accionables.
- **Actores:** Analista de seguridad (primario), AI Security Dashboard (sistema), Servicios de scoring y alertas (soporte).
- **Pre-condición:** Existen scores recientes de archivos/usuarios y eventos de alerta almacenados; el analista tiene acceso al dashboard.
- **Post-condición:** Las vistas del dashboard muestran métricas actualizadas (top usuarios en riesgo, severidad por periodo, archivos sospechosos), recomendaciones y links a expedientes/alertas.
- **Condición:** Los datos se refrescan solo si se dispone de scores y alertas recientes; en caso contrario se indica falta de datos.
- **Puntos de extensión:** Integración con tickets externos (p. ej., Jira/ITSM) y con acciones de bloqueo/cuarenentena directas desde el dashboard.

## Curso básico
1. El analista abre el AI Security Dashboard.
2. El dashboard solicita al backend los agregados de `ThreatScore`, `RiskScore` y alertas más recientes.
3. El backend consulta las colecciones de scores y alertas, agregando por severidad, usuario, periodo y tipo de recurso.
4. El backend devuelve al dashboard los KPIs (top N usuarios en riesgo, archivos sospechosos, alertas críticas) y recomendaciones derivadas de umbrales configurados.
5. El dashboard presenta gráficos y tablas, enlazando a los expedientes o alertas individuales para revisión.

## Cursos alternativos
- **A1: Falta de datos recientes**
  1. Si no hay scores/alertas en el rango solicitado, el backend devuelve un estado de "sin datos recientes".
  2. El dashboard muestra el aviso y sugiere refrescar o ampliar el rango temporal.
- **A2: Errores al generar agregados**
  1. Si ocurre un error al consolidar métricas, el backend registra la falla y devuelve un mensaje de error controlado.
  2. El dashboard informa la incidencia y recomienda reintentar o contactar soporte.
- **A3: Acciones recomendadas por severidad**
  1. Para usuarios/archivos con severidad alta, el backend incluye recomendaciones específicas (revisión manual, bloqueo, cuarentena).
  2. El dashboard muestra botones o enlaces para ejecutar las acciones (sujeto a permisos).

## Pos-condición
- El dashboard queda actualizado con métricas, recomendaciones y enlaces navegables a los expedientes, permitiendo al analista priorizar acciones de seguridad.
